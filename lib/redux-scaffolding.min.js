module.exports=function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([function(e,t,r){"use strict";var o=this&&this.__awaiter||function(a,i,c,s){return new(c||(c=Promise))(function(e,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new c(function(e){e(t.value)}).then(r,n)}o((s=s.apply(a,i||[])).next())})},a=this&&this.__generator||function(r,n){var o,a,i,e,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,a&&(i=2&t[0]?a.return:t[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,t[1])).done)return i;switch(a=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,a=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(i=0<(i=c.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){c.label=t[1];break}if(6===t[0]&&c.label<i[1]){c.label=i[1],i=t;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(t);break}i[2]&&c.ops.pop(),c.trys.pop();continue}t=n.call(r,c)}catch(e){t=[6,e],a=0}finally{o=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getProperty=function(e,t){var r,n=t.split("."),o=n.length,a=e||{};for(r=0;r<o;r++){if(!a)return;a=a[n[r]]}return a},t.mergeBranch=function(e,t,r){for(var n=t.split("."),o=e,a=0;a<n.length-1;a++){var i=o[n[a]];o=i||(o[n[a]]={})}return o[n[a]]=Object.assign(o[n[a]]||{},r)},t.asyncForEach=function(r,n){return o(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<r.length?[4,n(r[t],t,r)]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},t.clone=function(e){return"object"==typeof e?Object.assign({},e):e}},function(e,t,r){"use strict";var p=this&&this.__awaiter||function(a,i,c,s){return new(c||(c=Promise))(function(e,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new c(function(e){e(t.value)}).then(r,n)}o((s=s.apply(a,i||[])).next())})},l=this&&this.__generator||function(r,n){var o,a,i,e,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,a&&(i=2&t[0]?a.return:t[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,t[1])).done)return i;switch(a=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,a=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(i=0<(i=c.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){c.label=t[1];break}if(6===t[0]&&c.label<i[1]){c.label=i[1],i=t;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(t);break}i[2]&&c.ops.pop(),c.trys.pop();continue}t=n.call(r,c)}catch(e){t=[6,e],a=0}finally{o=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),f=r(0),c=r(0),o=function(){};t.AsyncAction=o;var u=function(){function e(e){this._repository=e}return e.prototype.wait=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{actionNames:e,args:void 0,type:"wait"}},e.prototype.update=function(e,t){return{actionNames:[e],args:t,type:"update"}},e.prototype.dispatch=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return{actionNames:[e],args:t,type:"dispatch"}},e}();t.SagaControl=u;var a=function(){function e(e){this._state=e,this._store=null,this._dynamicReducers=[]}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),e.prototype.dispatchAsync=function(n,e){for(var o=this,a=[],t=2;t<arguments.length;t++)a[t-2]=arguments[t];return new Promise(function(t,r){o.dispatch(n+"_STARTED",a),e.then(function(e){o.dispatch.apply(o,[n+"_SUCCEEDED",e].concat(a)),t(e)}).catch(function(e){o.dispatch.apply(o,[n+"_FAILED",e].concat(a)),r(e)})})},e.prototype.dispatch=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._store)throw new Error("The repository '"+this.constructor.name+"' is not associated with any store");var o=Reflect.getMetadata("__STORE",this);(t=this._store).dispatch.apply(t,[o.namespace+"/"+e].concat(r))},e.prototype.addReducer=function(e,t,r){var n=Reflect.getMetadata("__STORE",this),o=new i(e,n.attachTo,this,t,r);if(this._store)throw new Error("Cannot add new reducer because the repository is mounted on a store.");this._dynamicReducers.push(o)},e}();t.ReduxRepository=a;var i=function(e,t,r,n,o){this.actionName=e,this.reducer=n,this.branch=t,this.repository=r,this.actionType=o};t.ReducerDefinition=i;var s=function(){function e(){this._reducers=new Map,this._store=null,this._repositories=new Map,this._initialState={},this._transientReducers=new Map}return Object.defineProperty(e.prototype,"state",{get:function(){return this._store.getState()},enumerable:!0,configurable:!0}),e.prototype.getRootReducer=function(a){var i=this;return function(t,r){var e=i._reducers.get(r.type),n=i._transientReducers.get(r.type);if(!e&&!n&&!a)return a||r.type&&(r.type.startsWith("@@redux/")||r.type.startsWith("@@INIT"))||console.log("WARNING: Reducer for '"+r.type+"' not found"),null==a?t:a(t,r);if(e){var o=e.reducer(r);e.repository._state=f.mergeBranch(t,e.branch,o)}return n&&(n.forEach(function(e){t=e.reducer.apply(e,[t].concat(r.payload||[])),e.repository._state=f.getProperty(t,e.branch)}),i._transientReducers.delete(r.type)),c.clone(null==a?t:a(t,r))}},e.prototype.getStore=function(e,t,r){return r=r||n.createStore,this._store=r(this.getRootReducer(t),e||this._initialState)},e.prototype.addReducer=function(e,t,r,n,o){this._reducers.set(e,new i(e,t,r,n,o))},e.prototype.dispatch=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._store)throw new Error("Redux store not initialized. Please call storeBuilder.getStore()");this._store.dispatch({type:e,payload:t})},e.prototype.enhanceReducer=function(e,t,n,o,a,r){var i=this,c=t+"/"+e;switch(r){case"AsyncAction":var s=a();s.onStart&&this.addReducer(c+"_STARTED",o,n,function(e){return s.onStart.apply(s,e.payload)},"Simple"),s.onSuccess&&this.addReducer(c+"_SUCCEEDED",o,n,function(e){return s.onSuccess.apply(s,[e.payload[0]].concat(e.payload?e.payload.slice(1):void 0))},"Simple"),s.onError&&this.addReducer(c+"_FAILED",o,n,function(e){return s.onError.apply(s,[e.payload[0]].concat(e.payload?e.payload.slice(1):void 0))},"Simple");break;case"Saga":this.addReducer(c,o,n,function(r){return p(i,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return t=a.bind(n).apply(void 0,[new u(n)].concat(r.payload)),[4,this.processIterator(n,c,o,t)];case 1:return[2,e.sent()]}})})},"Saga");break;default:this.addReducer(c,o,n,function(e){return a.bind(n).apply(void 0,e.payload)},"Simple")}},e.prototype.addTransientReducer=function(e,t){var r=this._transientReducers.get(e);r?r.push(t):this._transientReducers.set(e,[t])},e.prototype.processIterator=function(i,c,s,u,t){return p(this,void 0,void 0,function(){var o,a,r=this;return l(this,function(e){switch(e.label){case 0:o=void 0,e.label=1;case 1:return[4,u.next(t||i.state)];case 2:o=e.sent(),e.label=3;case 3:if(o&&!o.value&&!o.done)return[3,1];e.label=4;case 4:return a=i._store,null==o||o.done?[2,i.state]:[4,f.asyncForEach(o.value.actionNames,function(t){return p(r,void 0,void 0,function(){var r,n=this;return l(this,function(e){switch(e.label){case 0:switch(r=t.startsWith("@@")?t:c+"_"+t,o.value.type){case"wait":return[3,1];case"update":return[3,2];case"dispatch":return[3,3]}return[3,5];case 1:return this.addTransientReducer(r,{actionName:r,actionType:"Simple",branch:s,repository:i,reducer:function(e,t){return setTimeout(function(){return n.processIterator(i,c,s,u,{type:r,payload:t})}),e}}),[3,5];case 2:return this.addTransientReducer(r,{actionName:r,actionType:"Simple",branch:s,repository:i,reducer:function(e,t){return f.mergeBranch(e,s,t||{}),setTimeout(function(){return n.processIterator(i,c,s,u)}),e}}),a.dispatch.apply(a,[r].concat(o.value.args)),[3,5];case 3:return a.dispatch.apply(a,[r].concat(o.value.args)),[4,this.processIterator(i,c,s,u)];case 4:return[2,e.sent()];case 5:return[2]}})})})];case 5:return e.sent(),[2,i.state]}})})},e.prototype.addRepository=function(o){var a=this,i=Reflect.getMetadata("__STORE",o);if(null==i||!i.namespace||""==i.attachTo)throw new Error("Attribute @repository is missing on repository '"+typeof o+"'");this._repositories.set(o.constructor.name,{repository:o,attachTo:i.attachTo});var e=o;e._store=this,e._dynamicReducers&&e._dynamicReducers.forEach(function(e){a.enhanceReducer(e.actionName,i.namespace,o,e.branch,e.reducer,e.actionType)}),f.mergeBranch(this._initialState,i.attachTo,o._state);var c=i.attachTo;Object.getOwnPropertyNames(Object.getPrototypeOf(o)).forEach(function(r){var n=Reflect.getMetadata("__ACTION",o,r);n&&n.actionNames&&n.actionNames.forEach(function(e){var t=o[r].bind(o);a.enhanceReducer(e,i.namespace,o,c,t,n.actionType)})})},e}();t.ReduxStoreBuilder=s,t.storeBuilder=new s},function(e,t,r){e.exports=r(3)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.AsyncAction=n.AsyncAction,t.ReduxRepository=n.ReduxRepository,t.SagaControl=n.SagaControl,t.storeBuilder=n.storeBuilder;var o=r(5);t.reduce=o.reduce,t.repository=o.repository,t.connect=o.connect,t.saga=o.saga},function(e,t){e.exports=require("redux")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(1);r(6);var n=r(7),a=r(0);t.repository=function(t,r){return function(e){if(!t.startsWith("@@"))throw new Error("Namespace should start with @@");return Reflect.defineMetadata("__STORE",{namespace:t,attachTo:r},e.prototype),e}},t.reduce=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return function(e,t,r){o.forEach(function(e){if(e.startsWith("@"))throw new Error("Action name cannot contain namespace information inside a repository")});var n=Reflect.getMetadata("design:returntype",e,t);return Reflect.defineMetadata("__ACTION",{actionNames:o,actionType:n?n.name:void 0},e,t),r}},t.saga=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(e,t){return Reflect.defineMetadata("__ACTION",{actionNames:r,actionType:"Saga"},e,t),e}},t.connect=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.connect(function(r){var n={};return e.forEach(function(e){var t=o.storeBuilder._repositories.get(e[1].name);if(!t)throw new Error("Repository '"+e[1].name+"' not registered in the store. Use storeBuilder.addRepository(repo) to register the repository");n[e[0]]={state:a.getProperty(r,t.attachTo)}}),r},function(){var r={};return e.forEach(function(e){var t=e[1].name;Object.defineProperty(r,e[0],{get:function(){var e=o.storeBuilder._repositories.get(t);if(!e)throw new Error("Repository '"+t+"' not registered in the store. Use storeBuilder.addRepository(repo) to register the repository");return e.repository},enumerable:!0,configurable:!0})}),r},null,{pure:!1})}},function(e,t){e.exports=require("reflect-metadata")},function(e,t){e.exports=require("react-redux")}]);
//# sourceMappingURL=redux-scaffolding.min.js.map